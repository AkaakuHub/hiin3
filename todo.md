以下は、提供されたドキュメントに基づいたTODOリストです。

### **I. プロジェクトの計画と理論的理解**
- [ ] **要件定義**: 課題の要件（3枚の画像の類似度比較）を把握する。
- [ ] **目標設定**: 課題要件を超える高精度なアプリケーション（自動・手動モード）の構築を目標とする。
- [ ] **理論学習**:
    - [ ] 顔ランドマークが顔形状の代理変数として機能することを理解する。
    - [ ] 撮影条件（姿勢、スケール、位置）の違いが座標比較の課題となることを認識する。
    - [ ] 上記の課題を解決する手法として、プロクラステス解析の原理を学習する。
- [ ] **技術比較**: 本プロジェクトの「形状分析」と、一般的な「顔認証（DeepFaceなど）」との技術的な違いを明確に区別する。

### **II. 開発環境のセットアップ**
- [ ] **Python環境準備**: Pythonをインストールする。
- [ ] **ライブラリインストール**: 以下のPythonライブラリを`pip`でインストールする。
    - `streamlit`
    - `mediapipe`
    - `opencv-python`
    - `numpy`
    - `scipy`
    - `streamlit-image-coordinates`
    - `Pillow`
- [ ] **モデルファイル準備**: MediaPipeの顔ランドマークモデル（`face_landmarker_v2_with_blendshapes.task`）をダウンロードし、プロジェクトフォルダに配置する。

### **III. アプリケーションの基本UI構築 (Streamlit)**
- [ ] **メイン画面設定**:
    - [ ] アプリのタイトルとページレイアウトを設定する。
    - [ ] 「自動解析モード」と「手動注釈モード」を選択できるサイドバーを設置する。
- [ ] **画像アップロード機能**:
    - [ ] 「基準画像」「比較画像1」「比較画像2」用に3つのファイルアップローダーを横並びに配置する。

### **IV. 自動解析モードの実装**
- [ ] **ランドマーク抽出機能**:
    - [ ] MediaPipeの`FaceLandmarker`を初期化する関数を作成する（`@st.cache_resource`でキャッシュする）。
    - [ ] 画像を受け取り、478個の3次元顔ランドマークをNumPy配列として抽出する関数を定義する。
- [ ] **類似度計算機能**:
    - [ ] 2つのランドマークセット（NumPy配列）を入力とし、`scipy.spatial.procrustes`を用いてプロクラステス不一致度を返す関数を作成する。
- [ ] **メイン処理ロジック**:
    - [ ] アップロードされた3枚の画像を読み込み、ランドマークを抽出する。
    - [ ] 「基準 vs 比較1」と「基準 vs 比較2」のペアで不一致度を計算する。
- [ ] **結果の可視化**:
    - [ ] 計算された2つの不一致度スコアを画面に表示する。
    - [ ] 検出されたランドマークを元の画像上に描画して表示する。

### **V. 手動注釈モードの実装**
- [ ] **状態管理**:
    - [ ] `st.session_state`を初期化し、各画像の注釈座標リストを保持できるようにする。
- [ ] **インタラクティブ注釈UI**:
    - [ ] `streamlit-image-coordinates`を使い、ユーザーがクリックした画像の座標を取得する機能を実装する。
    - [ ] 注釈対象の画像をラジオボタンで切り替えられるようにする。
- [ ] **リアルタイムフィードバック**:
    - [ ] クリックされた位置に点をリアルタイムで描画し、視覚的にフィードバックを提供する。
    - [ ] 各画像にプロットされた点の数を表示する。
    - [ ] 「最後の点を削除」「全点をクリア」するボタンを実装する。
- [ ] **類似度計算の適用**:
    - [ ] 全ての画像に同数（3点以上）の点がプロットされたことを確認する。
    - [ ] 「類似度を計算する」ボタンを設置し、クリックされたら手動プロット点にプロクラステス解析を適用し、結果を表示する。

### **VI. 分析とレポート作成**
- [ ] **結果の解釈**:
    - [ ] プロクラステス不一致度スコア（値が低いほど類似）の解釈方法をまとめる。
    - [ ] 自動モードと手動モードで得られた結果を比較し、情報量や客観性の観点から考察する。
- [ ] **成果物の整理**:
    - [ ] 実験結果をまとめるための表を作成する（例：表2）。
    - [ ] 扱った技術を比較するための表を作成する（例：表3）。
- [ ] **将来性の検討**:
    - [ ] 機能拡張のアイデア（パーツごとの分析、3次元情報の活用など）を考察する。
- [ ] **ソースコードの完成**:
    - [ ] 全ての機能を統合した最終的なPythonスクリプトを完成させ、コメントを追記する。